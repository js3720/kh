<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <comment>Board Service SQL</comment>
    <!-- 게시글 목록 조회 + 댓글 개수 -->
    <entry key="selectAll">
        SELECT BOARD_NO, BOARD_TITLE, CREATE_DATE, READ_COUNT, MEMBER_NM,
        (SELECT COUNT(*) FROM REPLY "R" WHERE R.BOARD_NO = B.BOARD_NO )"REPLY_COUNT"
        FROM BOARD "B"
        JOIN MEMBER USING (MEMBER_NO)
        ORDER BY BOARD_NO DESC
    </entry>
    <!-- 특정 게시글 상세 조회 -->
    <entry key="selectOne">
        SELECT B.*, M.MEMBER_NM
        FROM BOARD "B"
        JOIN MEMBER "M" ON(B.MEMBER_NO = M.MEMBER_NO)
        WHERE BOARD_NO = ?
    </entry>
    <!-- 특정 게시글 댓글 목록 조회 -->
    <entry key="selectReplyList">
        SELECT R.* , MEMBER_NM
        FROM REPLY "R"
        JOIN MEMBER "M" ON(R.MEMBER_NO = M.MEMBER_NO)
        WHERE BOARD_NO = ?
    </entry>
    <!-- 게시글 조회수 증가 -->
    <entry key="increaseReadCount">
        UPDATE BOARD SET
        READ_COUNT = READ_COUNT+1
        WHERE BOARD_NO = ?
    </entry>
    <!-- 게시글 삭제 -->
    <entry key="deleteBoard">
        DELETE FROM BOARD
        WHERE BOARD_NO = ?
    </entry>
</properties>
